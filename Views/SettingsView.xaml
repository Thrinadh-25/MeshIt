<UserControl x:Class="meshIt.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="{DynamicResource PrimaryBackground}">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="28,20" MaxWidth="440">

            <TextBlock Text="âš™ï¸ Settings" FontSize="20" FontWeight="SemiBold"
                       Foreground="{DynamicResource PrimaryText}" Margin="0,0,0,20"/>

            <!-- Theme -->
            <Border Background="{DynamicResource SecondaryBackground}" CornerRadius="12"
                    Padding="20" Margin="0,0,0,12">
                <StackPanel>
                    <TextBlock Text="ðŸŽ¨ Theme" FontSize="13" FontWeight="SemiBold"
                               Foreground="{DynamicResource PrimaryText}" Margin="0,0,0,10"/>
                    <ComboBox ItemsSource="{Binding AvailableThemes}"
                              SelectedItem="{Binding SelectedTheme}"
                              FontSize="13" Padding="8,6"
                              Background="{DynamicResource SurfaceBackground}"
                              Foreground="{DynamicResource PrimaryText}"
                              BorderBrush="{DynamicResource BorderBrush}"/>
                </StackPanel>
            </Border>

            <!-- Language -->
            <Border Background="{DynamicResource SecondaryBackground}" CornerRadius="12"
                    Padding="20" Margin="0,0,0,12">
                <StackPanel>
                    <TextBlock Text="ðŸŒ Language" FontSize="13" FontWeight="SemiBold"
                               Foreground="{DynamicResource PrimaryText}" Margin="0,0,0,10"/>
                    <ComboBox ItemsSource="{Binding AvailableLanguages}"
                              SelectedItem="{Binding SelectedLanguage}"
                              FontSize="13" Padding="8,6"
                              Background="{DynamicResource SurfaceBackground}"
                              Foreground="{DynamicResource PrimaryText}"
                              BorderBrush="{DynamicResource BorderBrush}"/>
                </StackPanel>
            </Border>

            <!-- Notifications -->
            <Border Background="{DynamicResource SecondaryBackground}" CornerRadius="12"
                    Padding="20" Margin="0,0,0,12">
                <Grid>
                    <TextBlock Text="ðŸ”” Notifications" FontSize="13" FontWeight="SemiBold"
                               Foreground="{DynamicResource PrimaryText}" VerticalAlignment="Center"/>
                    <CheckBox IsChecked="{Binding NotificationsEnabled}"
                              HorizontalAlignment="Right" VerticalAlignment="Center"/>
                </Grid>
            </Border>

            <!-- Screen Lock -->
            <Border Background="{DynamicResource SecondaryBackground}" CornerRadius="12"
                    Padding="20" Margin="0,0,0,12">
                <StackPanel>
                    <TextBlock Text="ðŸ”’ Screen Lock" FontSize="13" FontWeight="SemiBold"
                               Foreground="{DynamicResource PrimaryText}" Margin="0,0,0,10"/>

                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Border Grid.Column="0" Background="{DynamicResource SurfaceBackground}"
                                CornerRadius="8" Padding="2,0">
                            <PasswordBox x:Name="PinInput" FontSize="14" MaxLength="8"
                                         PasswordChar="â—" Padding="10,8"
                                         Background="Transparent" BorderThickness="0"
                                         Foreground="{DynamicResource PrimaryText}"/>
                        </Border>
                        <Button Grid.Column="1" Content="Set PIN" Margin="8,0,0,0"
                                Command="{Binding SetLockPinCommand}" Cursor="Hand" Padding="14,8">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="{DynamicResource AccentBrush}"/>
                                    <Setter Property="Foreground" Value="White"/>
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" CornerRadius="8"
                                                        Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>
                    </Grid>

                    <Button Content="ðŸ”“ Remove Lock" Command="{Binding RemoveLockCommand}"
                            Cursor="Hand" Padding="14,8" HorizontalAlignment="Left"
                            Visibility="{Binding LockEnabled, Converter={StaticResource BoolToVis}}">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="{DynamicResource ErrorBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="BorderThickness" Value="0"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="8"
                                                    Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>

                    <TextBlock Text="{Binding StatusMessage}" FontSize="12"
                               Foreground="{DynamicResource SuccessBrush}" Margin="0,8,0,0"/>
                </StackPanel>
            </Border>

            <!-- About -->
            <Border Background="{DynamicResource SecondaryBackground}" CornerRadius="12"
                    Padding="20" Margin="0,0,0,12">
                <StackPanel>
                    <TextBlock Text="meshIt v3.0" FontSize="14" FontWeight="Bold"
                               Foreground="{DynamicResource PrimaryText}"/>
                    <TextBlock Text="BLE Mesh Messaging â€¢ Noise Protocol â€¢ End-to-End Encrypted"
                               FontSize="11" Foreground="{DynamicResource MutedText}" Margin="0,4,0,0"
                               TextWrapping="Wrap"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
